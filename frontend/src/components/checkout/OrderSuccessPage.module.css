/* frontend/src/components/checkout/OrderSuccessPage.module.css */

/* --- Layout Containers --- */
.success-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100dvh;
    width: 100%;
    padding: 20px 16px;
    padding-bottom: calc(40px + env(safe-area-inset-bottom));
    background-color: var(--app-secondary-bg-color, #f5f5f7);
    overflow-x: hidden;
    color: var(--app-text-color, #000);
    animation: fadeInPage 0.5s ease-out;
}

/* --- RECEIPT CARD --- */
.receipt-card {
    position: relative;
    width: 100%;
    max-width: 400px;
    background: var(--app-bg-color, #fff);
    margin-top: 20px;
    margin-bottom: 24px;
    padding: 32px 24px 48px 24px;
    /* Extra bottom padding for zigzag */
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
    display: flex;
    flex-direction: column;

    /* Animation */
    transform-origin: center top;
    animation: printReceipt 0.8s cubic-bezier(0.16, 1, 0.3, 1) both;

    /* Zigzag Effect at Bottom */
    --zigzag-size: 10px;
    mask-image:
        linear-gradient(to bottom, black calc(100% - var(--zigzag-size)), transparent 100%),
        radial-gradient(circle at bottom, transparent var(--zigzag-size), black calc(var(--zigzag-size) + 0.5px));
    mask-size: 100% 100%, calc(var(--zigzag-size) * 2) calc(var(--zigzag-size) * 2);
    mask-position: top center, bottom center;
    mask-repeat: no-repeat, repeat-x;
    mask-composite: intersect;
    /* Fallback for mask composite if needed, usually intersect or distinct layers */
    -webkit-mask-image:
        conic-gradient(from 45deg at bottom, transparent 25%, black 0deg 90deg, transparent 0deg) repeat-x bottom left / 20px 10px,
        linear-gradient(to bottom, black calc(100% - 10px), transparent 100%);
    -webkit-mask-composite: source-in;
    /* Actually we want to subtract but simpler zig zag works differently */
}

/* Alternative Zigzag CSS (Simpler and robust) */
.receipt-card::after {
    content: "";
    position: absolute;
    bottom: -10px;
    left: 0;
    width: 100%;
    height: 10px;
    background:
        linear-gradient(45deg, transparent 33.333%, var(--app-bg-color) 33.333%, var(--app-bg-color) 66.667%, transparent 66.667%),
        linear-gradient(-45deg, transparent 33.333%, var(--app-bg-color) 33.333%, var(--app-bg-color) 66.667%, transparent 66.667%);
    background-size: 20px 20px;
    background-position: 0 -10px;
    /* Adjust based on exact visual */
    /* This method adds "teeth" at the bottom, but masking 'cuts' them. 
       Let's stick to a simpler approach: Just a border-image or radial gradient mask on the main element itself if supported.
       For simple reliable cross-browser "torn paper", standard repeating-linear-gradient is best. 
    */
    display: none;
    /* Disabling pseudo for now, relying on clip-path or mask below */
}

.receipt-card {
    /* Using Clip Path for jagged edge - solid and reliable */
    --tooth-width: 20px;
    --tooth-height: 10px;
    -webkit-mask-image:
        radial-gradient(circle at 10px 10px, transparent 10px, black 10.5px);
    -webkit-mask-position: -10px calc(100% - 20px);
    -webkit-mask-size: 40px 40px;
    /* Actually clip-path polygon is easier for jagged bottom */
    clip-path: polygon(0% 0%,
            100% 0%,
            100% 100%,
            98% 99%, 96% 100%, 94% 99%, 92% 100%, 90% 99%, 88% 100%, 86% 99%, 84% 100%, 82% 99%, 80% 100%, 78% 99%, 76% 100%, 74% 99%, 72% 100%, 70% 99%, 68% 100%, 66% 99%, 64% 100%, 62% 99%, 60% 100%, 58% 99%, 56% 100%, 54% 99%, 52% 100%, 50% 99%, 48% 100%, 46% 99%, 44% 100%, 42% 99%, 40% 100%, 38% 99%, 36% 100%, 34% 99%, 32% 100%, 30% 99%, 28% 100%, 26% 99%, 24% 100%, 22% 99%, 20% 100%, 18% 99%, 16% 100%, 14% 99%, 12% 100%, 10% 99%, 8% 100%, 6% 99%, 4% 100%, 2% 99%, 0% 100%);
    /* Note: Hardcoded polygon is messy but most reliable without SVG. 
       Let's use a cleaner background gradient mask approach. */
    -webkit-mask:
        linear-gradient(#fff, #fff) 50% 50%/calc(100% - 0px) calc(100% - 10px) no-repeat,
        radial-gradient(circle closest-side, #000 99%, #0000 102%) 0% 100%/20px 20px repeat-x;
    /* The radial gradient creates 'bumps' at bottom. */
    mask:
        linear-gradient(#fff, #fff) 50% 50%/calc(100% - 0px) calc(100% - 10px) no-repeat,
        radial-gradient(circle closest-side, #000 99%, #0000 102%) 0% 100%/20px 20px repeat-x;

    padding-bottom: 30px !important;
    /* Ensure space for teeth */
    clip-path: none !important;
    /* Reset testing */
}

/* --- Header Section --- */
.receipt-header {
    text-align: center;
    margin-bottom: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.brand-name {
    font-size: 18px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 8px;
    color: var(--app-text-color);
}

.success-icon-wrapper {
    margin: 12px 0;
    color: var(--positive-action, #34c759);
}

.order-title {
    font-size: 24px;
    font-weight: 700;
    margin: 4px 0;
    color: var(--app-text-color);
}

.order-meta {
    font-size: 13px;
    color: var(--app-hint-color);
    font-family: monospace;
    /* Monospace for 'receipt' feel */
    margin-top: 4px;
}

/* --- Divider --- */
.dashed-divider {
    width: 100%;
    height: 1px;
    border-bottom: 2px dashed var(--app-separator-color);
    margin: 16px 0;
}

/* --- Items List --- */
.items-list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 8px;
}

.item-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
    font-size: 14px;
    line-height: 1.4;
}

.item-name-col {
    flex: 1;
}

.item-name {
    font-weight: 600;
    color: var(--app-text-color);
    display: block;
}

.item-details {
    color: var(--app-hint-color);
    font-size: 12px;
    margin-top: 2px;
}

.item-price {
    font-weight: 600;
    white-space: nowrap;
    color: var(--app-text-color);
}

/* --- Summary --- */
.summary-block {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: var(--app-text-color);
}

.summary-row.discount {
    color: var(--app-destructive-text-color, #ff3b30);
}

.total-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
    padding-top: 16px;
    border-top: 2px dashed var(--app-separator-color);
}

.total-label {
    font-size: 16px;
    font-weight: 700;
    text-transform: uppercase;
}

.total-value {
    font-size: 24px;
    font-weight: 800;
    color: var(--app-text-color);
    letter-spacing: -0.5px;
}

/* --- Delivery Info --- */
.delivery-info {
    font-size: 13px;
    color: var(--app-hint-color);
    text-align: left;
    width: 100%;
    line-height: 1.5;
}

.info-label {
    font-weight: 600;
    color: var(--app-text-color);
    margin-right: 4px;
    display: block;
    /* New line for label */
    margin-bottom: 2px;
}

.barcode-sim {
    margin-top: 24px;
    height: 40px;
    width: 80%;
    margin-left: auto;
    margin-right: auto;
    background-image: repeating-linear-gradient(90deg,
            #000 0,
            #000 2px,
            transparent 2px,
            transparent 4px,
            #000 4px,
            #000 5px,
            transparent 5px,
            transparent 7px);
    opacity: 0.3;
}

/* --- Action Buttons --- */
.actions-block {
    width: 100%;
    max-width: 400px;
    margin-top: 12px;
}

.primary-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 52px;
    background-color: var(--color-success, #34c759);
    /* Using green for success/continue feels right, creates contrast with receipt */
    /* Or keep brand color */
    background-color: var(--app-button-color);
    color: var(--app-button-text-color);
    border-radius: 14px;
    font-weight: 600;
    font-size: 16px;
    text-decoration: none;
    transition: transform 0.2s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.primary-button:active {
    transform: scale(0.97);
}

@keyframes fadeInPage {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes printReceipt {
    from {
        clip-path: inset(0 0 100% 0);
        opacity: 0;
        transform: translateY(-20px);
    }

    to {
        clip-path: inset(0 0 0 0);
        opacity: 1;
        transform: translateY(0);
    }
}